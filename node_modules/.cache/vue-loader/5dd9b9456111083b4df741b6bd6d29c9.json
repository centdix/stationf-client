{"remainingRequest":"/Users/farhad/Desktop/stationf/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/farhad/Desktop/stationf/client/src/components/RoomsList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/farhad/Desktop/stationf/client/src/components/RoomsList.vue","mtime":1611170120269},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUm9vbXNMaXN0JywKICBwcm9wczogWwogICAgJ3N0YXJ0X2RhdGUnLAogICAgJ2VuZF9kYXRlJywKICAgICdhdmFpbGFibGVfcm9vbXMnCiAgXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWluX2NhcDogMCwKICAgICAgdHZfc2VsZWN0ZWQ6IGZhbHNlLAogICAgICByZXRyb19zZWxlY3RlZDogZmFsc2UsCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBib29rKHJvb20pIHsKICAgICAgbGV0IGJvb2tpbmcgPSB7CiAgICAgICAgcm9vbV9uYW1lOiByb29tLm5hbWUsCiAgICAgICAgc3RhcnRfZGF0ZTogdGhpcy5zdGFydF9kYXRlLAogICAgICAgIGVuZF9kYXRlOiB0aGlzLmVuZF9kYXRlLAogICAgICB9OwogICAgICBsZXQgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9ib29rJywgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICB9LAogICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvb2tpbmcpLAogICAgICB9KTsKICAgICAgdGhpcy4kZW1pdCgnYm9vaycpOwogICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKQogICAgICAgIHRoaXMuJHRvYXN0ZWQuc3VjY2VzcygnUm9vbSBib29rZWQgIScpLmdvQXdheSgxNTAwKTsKICAgICAgZWxzZQogICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoJ1NvbWV0aGluZyB3ZW50IHdyb25nLi4uJykuZ29Bd2F5KDE1MDApOwogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBmaWx0ZXJlZFJvb21zKCkgewogICAgICBsZXQgcmVzdWx0cyA9IFsuLi50aGlzLmF2YWlsYWJsZV9yb29tc107CiAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcigocikgPT4gewogICAgICAgIGlmIChyLmNhcGFjaXR5IDwgdGhpcy5taW5fY2FwKQogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIGxldCBoYXNfdHYgPSBmYWxzZTsKICAgICAgICBsZXQgaGFzX3JldHJvID0gZmFsc2U7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByLmVxdWlwZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoci5lcXVpcGVtZW50c1tpXS5uYW1lID09PSAiVFYiKQogICAgICAgICAgICBoYXNfdHYgPSB0cnVlOwogICAgICAgICAgaWYgKHIuZXF1aXBlbWVudHNbaV0ubmFtZSA9PT0gIlJldHJvIFByb2plY3RldXIiKQogICAgICAgICAgICBoYXNfcmV0cm8gPSB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoKHRoaXMudHZfc2VsZWN0ZWQgJiYgIWhhc190dikgfHwgdGhpcy5yZXRyb19zZWxlY3RlZCAmJiAhaGFzX3JldHJvKQogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9KQogICAgICByZXR1cm4gcmVzdWx0czsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["RoomsList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RoomsList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"results\" class=\"mt-4\" v-if=\"available_rooms.length > 0\">\n    <hr>\n    <div class=\"row ml-1\">\n      <h5>Rooms available from {{ start_date | moment(\"L, HH:mm\") }} to {{ end_date | moment(\"L, HH:mm\") }} :</h5>\n    </div>\n    <div class=\"row mt-3\">\n      <div class=\"col-6\">\n        <span>Minimum capacity: {{ min_cap }}</span>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-4\">\n        <input type=\"range\" class=\"form-control-range\" id=\"formControlRange\" min=\"0\" max=\"50\" v-model=\"min_cap\">\n      </div>\n      <div class=\"col-3 offset-md-2\">\n        <input class=\"form-check-input\" type=\"checkbox\" v-model=\"tv_selected\" id=\"flexCheckChecked\">\n        <label class=\"form-check-label\" for=\"flexCheckChecked\">TV</label>\n      </div>\n      <div class=\"col-3\">\n        <input class=\"form-check-input\" type=\"checkbox\" v-model=\"retro_selected\" id=\"flexCheckChecked\">\n        <label class=\"form-check-label\" for=\"flexCheckChecked\">Retro Projecteur</label>\n      </div>  \n    </div>\n    <div class=\"card mt-1\" v-for=\"room in filteredRooms\" :key=\"room.id\">\n      <h5 class=\"card-header text-center\">\n        {{ room.name }}\n      </h5>\n      <div class=\"card-body\">\n        <div class=\"row m-2 justify-content-center\">\n          <div class=\"col-4\">\n            Capacity: {{ room.capacity }}\n          </div>\n          <div class=\"col-4\">\n            <span v-if=\"room.equipements.length > 0\">Equipments: </span>\n            <span v-else>No equipments</span>\n            <br>\n            <span v-for=\"e in room.equipements\" :key=\"e.id\" class=\"ml-3\">\n              {{ e.name }}\n            </span>\n          </div>\n        </div>\n        <div class=\"row justify-content-end m-3\">\n          <button class=\"btn btn-primary col-3\" @click=\"book(room)\">Book</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'RoomsList',\n    props: [\n      'start_date',\n      'end_date',\n      'available_rooms'\n    ],\n    data() {\n      return {\n        min_cap: 0,\n        tv_selected: false,\n        retro_selected: false,\n      }\n    },\n    methods: {\n      async book(room) {\n        let booking = {\n          room_name: room.name,\n          start_date: this.start_date,\n          end_date: this.end_date,\n        };\n        let res = await fetch('http://localhost:8000/book', {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          method: 'POST',\n          body: JSON.stringify(booking),\n        });\n        this.$emit('book');\n        if (res.status === 200)\n          this.$toasted.success('Room booked !').goAway(1500);\n        else\n          this.$toasted.error('Something went wrong...').goAway(1500);\n      },\n    },\n    computed: {\n      filteredRooms() {\n        let results = [...this.available_rooms];\n        results = results.filter((r) => {\n          if (r.capacity < this.min_cap)\n            return false;\n          let has_tv = false;\n          let has_retro = false;\n          for (let i = 0; i < r.equipements.length; i++) {\n            if (r.equipements[i].name === \"TV\")\n              has_tv = true;\n            if (r.equipements[i].name === \"Retro Projecteur\")\n              has_retro = true;\n          }\n          if ((this.tv_selected && !has_tv) || this.retro_selected && !has_retro)\n            return false;\n          return true;\n        })\n        return results;\n      }\n    }\n  }\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\n\n</style>\n"]}]}