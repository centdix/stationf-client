{"remainingRequest":"/Users/farhad/Desktop/stationf/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/farhad/Desktop/stationf/client/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/farhad/Desktop/stationf/client/src/App.vue","mtime":1611301830496},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/cache-loader/dist/cjs.js","mtime":1611239831161},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/babel-loader/lib/index.js","mtime":1611239831032},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/cache-loader/dist/cjs.js","mtime":1611239831161},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/vue-loader/lib/index.js","mtime":1611239836809}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWVUaW1lcGlja2VyIGZyb20gJ3Z1ZTItdGltZXBpY2tlcic7CmltcG9ydCAndnVlMi10aW1lcGlja2VyL2Rpc3QvVnVlVGltZXBpY2tlci5jc3MnOwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7CmltcG9ydCBSb29tc0xpc3QgZnJvbSAnLi9jb21wb25lbnRzL1Jvb21zTGlzdCc7CmltcG9ydCBCb29raW5nc0xpc3QgZnJvbSAnLi9jb21wb25lbnRzL0Jvb2tpbmdzTGlzdCc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcCcsCiAgY29tcG9uZW50czogewogICAgVnVlVGltZXBpY2tlciwKICAgIFJvb21zTGlzdCwKICAgIEJvb2tpbmdzTGlzdAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGp1c3RfbGFuZGVkOiB0cnVlLAogICAgICBkYXRlOiAiIiwKICAgICAgdGltZTogIiIsCiAgICAgIGR1cmF0aW9uOiAiIiwKICAgICAgc3RhcnRfc2VhcmNoOiAiIiwKICAgICAgZW5kX3NlYXJjaDogIiIsCiAgICAgIGF2YWlsYWJsZV9yb29tczogW10sCiAgICAgIHJvb21zOiBbXSwKICAgICAgYm9va2luZ3M6IFtdLAogICAgfQogIH0sCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgIGF3YWl0IHRoaXMuZ2V0Um9vbXMoKTsKICAgIGF3YWl0IHRoaXMuZ2V0Qm9va2luZ3MoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZpbmRCeU5hbWUoYXJyLCBuYW1lKSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGFycltpXS5uYW1lID09PSBuYW1lKQogICAgICAgICAgcmV0dXJuIGk7CiAgICAgIH0KICAgICAgcmV0dXJuIC0xOwogICAgfSwKICAgIGFzeW5jIGdldFJvb21zKCkgewogICAgICBsZXQgdXJsID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMOwogICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwgKyAncm9vbXMnLCB7IG1ldGhvZDogJ2dldCcgfSk7CiAgICAgIGxldCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgICB0aGlzLnJvb21zID0gZGF0YS5yb29tczsKICAgIH0sCiAgICBhc3luYyBnZXRCb29raW5ncygpIHsKICAgICAgbGV0IHVybCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTDsKICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsICsgJ2Jvb2tpbmdzJywgeyBtZXRob2Q6ICdnZXQnIH0pCiAgICAgIGxldCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgICB0aGlzLmJvb2tpbmdzID0gZGF0YTsKICAgIH0sCiAgICBhc3luYyBkYXRlX3NlYXJjaCgpIHsKICAgICAgaWYgKHRoaXMuc3RhcnRfZGF0ZSA9PT0gbnVsbCB8fCB0aGlzLmVuZF9kYXRlID09PSBudWxsIHx8IHRoaXMuc3RhcnRfZGF0ZS5pc0JlZm9yZShuZXcgbW9tZW50KCkpIHx8IHRoaXMuc3RhcnRfZGF0ZS5pc1NhbWUodGhpcy5lbmRfZGF0ZSkpIHsKICAgICAgICB0aGlzLiR0b2FzdGVkLmVycm9yKCdJbnZhbGlkIG9yIGluY29tcGxldGUgaW5wdXRzJykuZ29Bd2F5KDE1MDApOwogICAgICAgIHJldHVybiA7CiAgICAgIH0KICAgICAgdGhpcy5qdXN0X2xhbmRlZCA9IGZhbHNlOwogICAgICB0aGlzLnN0YXJ0X3NlYXJjaCA9IHRoaXMuc3RhcnRfZGF0ZTsKICAgICAgdGhpcy5lbmRfc2VhcmNoID0gdGhpcy5lbmRfZGF0ZTsKICAgICAgbGV0IGF2YWlsYWJsZSA9IFsuLi50aGlzLnJvb21zXTsKICAgICAgbGV0IHVybCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTDsKICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsICsgJ2Jvb2tpbmdzJywgeyBtZXRob2Q6ICdnZXQnIH0pCiAgICAgIGxldCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgICB0aGlzLmJvb2tpbmdzID0gZGF0YTsKICAgICAgdGhpcy5ib29raW5ncy5mb3JFYWNoKChiKSA9PiB7CiAgICAgICAgbGV0IHN0YXJ0ID0gbW9tZW50KGIuc3RhcnRfZGF0ZSkuc3VidHJhY3QoMSwgJ21pbnV0ZXMnKTsKICAgICAgICBsZXQgZW5kID0gbW9tZW50KGIuZW5kX2RhdGUpLmFkZCgxLCAnbWludXRlcycpOwogICAgICAgIGlmICh0aGlzLnN0YXJ0X2RhdGUuaXNCZXR3ZWVuKHN0YXJ0LCBlbmQpIHx8IHRoaXMuZW5kX2RhdGUuaXNCZXR3ZWVuKHN0YXJ0LCBlbmQpCiAgICAgICAgICB8fCBzdGFydC5pc0JldHdlZW4odGhpcy5zdGFydF9kYXRlLCB0aGlzLmVuZF9kYXRlKSB8fCBlbmQuaXNCZXR3ZWVuKHRoaXMuc3RhcnRfZGF0ZSwgdGhpcy5lbmRfZGF0ZSkpCiAgICAgICAgewogICAgICAgICAgbGV0IGkgPSB0aGlzLmZpbmRCeU5hbWUoYXZhaWxhYmxlLCBiLnJvb21fbmFtZSk7CiAgICAgICAgICBhdmFpbGFibGUuc3BsaWNlKGksIDEpOwogICAgICAgIH0KICAgICAgfSkKICAgICAgdGhpcy5hdmFpbGFibGVfcm9vbXMgPSBhdmFpbGFibGU7CiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHN0YXJ0X2RhdGUoKSB7CiAgICAgIGxldCB0aW1lID0gdGhpcy50aW1lLnNwbGl0KCc6Jyk7CiAgICAgIGxldCBzdGFydF9kYXRlID0gbnVsbDsKICAgICAgaWYgKHRoaXMuZGF0ZS5sZW5ndGggPiAwICYmIHRpbWUubGVuZ3RoID4gMSkKICAgICAgICBzdGFydF9kYXRlID0gbmV3IG1vbWVudCh0aGlzLmRhdGUpLmhvdXJzKHRpbWVbMF0pLm1pbnV0ZXModGltZVsxXSk7CiAgICAgIHJldHVybiBzdGFydF9kYXRlOwogICAgfSwKICAgIGVuZF9kYXRlKCkgewogICAgICBsZXQgZHVyYXRpb24gPSB0aGlzLmR1cmF0aW9uLnNwbGl0KCc6Jyk7CiAgICAgIGxldCBlbmRfZGF0ZSA9IG51bGw7CiAgICAgIGlmICh0aGlzLnN0YXJ0X2RhdGUgIT0gbnVsbCAmJiBkdXJhdGlvbi5sZW5ndGggPiAxKSB7CiAgICAgICAgZW5kX2RhdGUgPSB0aGlzLnN0YXJ0X2RhdGUuY2xvbmUoKTsKICAgICAgICBlbmRfZGF0ZS5hZGQocGFyc2VJbnQoZHVyYXRpb25bMF0sIDEwKSwgJ2hvdXJzJyk7CiAgICAgICAgZW5kX2RhdGUuYWRkKHBhcnNlSW50KGR1cmF0aW9uWzFdLCAxMCksICdtaW51dGVzJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGVuZF9kYXRlOwogICAgfQogIH0KfQo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\" class=\"container\">\n    <h1 class=\"text-center\">Book a meeting room</h1>\n    <div id=\"date_search\" class=\"m-4\">\n      <h3 class=\"text-center\">Search by date and time</h3>\n      <div class=\"row mt-4 justify-content-center\">\n        <label class=\"col-3\">When: </label>\n        <input type=\"date\" id=\"date\" class=\"col-4\" v-model=\"date\">\n        <vue-timepicker :minute-interval=\"10\" v-model=\"time\" class=\"tp\"></vue-timepicker>\n      </div>\n      <div class=\"row mt-4 justify-content-center\">\n        <label class=\"col-3\">Duration: </label>\n        <vue-timepicker\n          :hour-range=\"[0, 1, 2, 3, 4, 5]\"\n          :minute-interval=\"30\"\n          v-model=\"duration\"\n          class=\"tp\">    \n        </vue-timepicker>\n        <button @click=\"date_search\" class=\"btn-secondary col-2 offset-md-2\">Search</button>\n      </div>\n    </div>\n    <div class=\"row m-4\"></div>\n    <hr>\n    <h6 v-if=\"just_landed\" class=\"text-center m-4\">Start searching to show available rooms</h6>\n    <RoomsList :start_date=\"start_search\" :end_date=\"end_search\"\n      :available_rooms=\"available_rooms\" @book=\"date_search\"\n      v-if=\"available_rooms.length > 0\"></RoomsList>\n    <hr>\n    <div class=\"row m-2\"></div>\n    <BookingsList :bookings=\"bookings\" @deleteBooking=\"getBookings\"></BookingsList>\n  </div>\n</template>\n\n<script>\n  import VueTimepicker from 'vue2-timepicker';\n  import 'vue2-timepicker/dist/VueTimepicker.css';\n  import moment from 'moment';\n  import RoomsList from './components/RoomsList';\n  import BookingsList from './components/BookingsList';\n\n  export default {\n    name: 'App',\n    components: {\n      VueTimepicker,\n      RoomsList,\n      BookingsList\n    },\n    data() {\n      return {\n        just_landed: true,\n        date: \"\",\n        time: \"\",\n        duration: \"\",\n        start_search: \"\",\n        end_search: \"\",\n        available_rooms: [],\n        rooms: [],\n        bookings: [],\n      }\n    },\n    async mounted() {\n      await this.getRooms();\n      await this.getBookings();\n    },\n    methods: {\n      findByName(arr, name) {\n        for (let i = 0; i < arr.length; i++) {\n          if (arr[i].name === name)\n            return i;\n        }\n        return -1;\n      },\n      async getRooms() {\n        let url = process.env.VUE_APP_API_URL;\n        let response = await fetch(url + 'rooms', { method: 'get' });\n        let data = await response.json();\n        this.rooms = data.rooms;\n      },\n      async getBookings() {\n        let url = process.env.VUE_APP_API_URL;\n        let response = await fetch(url + 'bookings', { method: 'get' })\n        let data = await response.json();\n        this.bookings = data;\n      },\n      async date_search() {\n        if (this.start_date === null || this.end_date === null || this.start_date.isBefore(new moment()) || this.start_date.isSame(this.end_date)) {\n          this.$toasted.error('Invalid or incomplete inputs').goAway(1500);\n          return ;\n        }\n        this.just_landed = false;\n        this.start_search = this.start_date;\n        this.end_search = this.end_date;\n        let available = [...this.rooms];\n        let url = process.env.VUE_APP_API_URL;\n        let response = await fetch(url + 'bookings', { method: 'get' })\n        let data = await response.json();\n        this.bookings = data;\n        this.bookings.forEach((b) => {\n          let start = moment(b.start_date).subtract(1, 'minutes');\n          let end = moment(b.end_date).add(1, 'minutes');\n          if (this.start_date.isBetween(start, end) || this.end_date.isBetween(start, end)\n            || start.isBetween(this.start_date, this.end_date) || end.isBetween(this.start_date, this.end_date))\n          {\n            let i = this.findByName(available, b.room_name);\n            available.splice(i, 1);\n          }\n        })\n        this.available_rooms = available;\n      },\n    },\n    computed: {\n      start_date() {\n        let time = this.time.split(':');\n        let start_date = null;\n        if (this.date.length > 0 && time.length > 1)\n          start_date = new moment(this.date).hours(time[0]).minutes(time[1]);\n        return start_date;\n      },\n      end_date() {\n        let duration = this.duration.split(':');\n        let end_date = null;\n        if (this.start_date != null && duration.length > 1) {\n          end_date = this.start_date.clone();\n          end_date.add(parseInt(duration[0], 10), 'hours');\n          end_date.add(parseInt(duration[1], 10), 'minutes');\n        }\n        return end_date;\n      }\n    }\n  }\n</script>\n\n<style>\n  #app {\n    font-family: Avenir, Helvetica, Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    color: #2c3e50;\n    margin-top: 30px;\n  }\n  .tp {\n    padding-left: 0;\n  }\n</style>\n"]}]}