{"remainingRequest":"/Users/farhad/Desktop/stationf/client/node_modules/babel-loader/lib/index.js!/Users/farhad/Desktop/stationf/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/farhad/Desktop/stationf/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/farhad/Desktop/stationf/client/src/components/SearchBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/farhad/Desktop/stationf/client/src/components/SearchBox.vue","mtime":1611167275987},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvZmFyaGFkL0Rlc2t0b3Avc3RhdGlvbmYvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IFZ1ZVRpbWVwaWNrZXIgZnJvbSAndnVlMi10aW1lcGlja2VyJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTZWFyY2hCb3gnLAogIHByb3BzOiBbJ3N0YXJ0X2RhdGUnLCAnZW5kX2RhdGUnLCAncm9vbXMnLCAnYm9va2luZ3MnLCAnYXZhaWxhYmxlX3Jvb21zJ10sCiAgY29tcG9uZW50czogewogICAgVnVlVGltZXBpY2tlcjogVnVlVGltZXBpY2tlcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGU6ICIiLAogICAgICB0aW1lOiAiIiwKICAgICAgZHVyYXRpb246ICIiCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0U3RhcnREYXRlOiBmdW5jdGlvbiBnZXRTdGFydERhdGUoKSB7CiAgICAgIHZhciB0aW1lID0gdGhpcy50aW1lLnNwbGl0KCc6Jyk7CiAgICAgIGlmICh0aGlzLmRhdGUubGVuZ3RoID4gMCAmJiB0aW1lLmxlbmd0aCA+IDEpIHRoaXMuc3RhcnRfZGF0ZSA9IG5ldyBtb21lbnQodGhpcy5kYXRlKS5ob3Vycyh0aW1lWzBdKS5taW51dGVzKHRpbWVbMV0pOwogICAgICByZXR1cm4gdGhpcy5zdGFydF9kYXRlOwogICAgfSwKICAgIGdldEVuZERhdGU6IGZ1bmN0aW9uIGdldEVuZERhdGUoKSB7CiAgICAgIHZhciBkdXJhdGlvbiA9IHRoaXMuZHVyYXRpb24uc3BsaXQoJzonKTsKICAgICAgdGhpcy5lbmRfZGF0ZSA9IG51bGw7CgogICAgICBpZiAodGhpcy5zdGFydF9kYXRlICE9IG51bGwgJiYgZHVyYXRpb24ubGVuZ3RoID4gMSkgewogICAgICAgIHRoaXMuZW5kX2RhdGUgPSB0aGlzLnN0YXJ0X2RhdGUuY2xvbmUoKTsKICAgICAgICB0aGlzLmVuZF9kYXRlLmFkZChwYXJzZUludChkdXJhdGlvblswXSwgMTApLCAnaG91cnMnKTsKICAgICAgICB0aGlzLmVuZF9kYXRlLmFkZChwYXJzZUludChkdXJhdGlvblsxXSwgMTApLCAnbWludXRlcycpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5lbmRfdmFsdWU7CiAgICB9LAogICAgZmluZEJ5TmFtZTogZnVuY3Rpb24gZmluZEJ5TmFtZShhcnIsIG5hbWUpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoYXJyW2ldLm5hbWUgPT09IG5hbWUpIHJldHVybiBpOwogICAgICB9CgogICAgICByZXR1cm4gLTE7CiAgICB9LAogICAgZGF0ZV9zZWFyY2g6IGZ1bmN0aW9uIGRhdGVfc2VhcmNoKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHN0YXJ0X3ZhbHVlID0gdGhpcy5nZXRTdGFydERhdGUoKTsKICAgICAgdmFyIGVuZF92YWx1ZSA9IHRoaXMuZ2V0RW5kRGF0ZSgpOwoKICAgICAgaWYgKHN0YXJ0X3ZhbHVlID09PSBudWxsIHx8IGVuZF92YWx1ZSA9PT0gbnVsbCB8fCBzdGFydF92YWx1ZS5pc0JlZm9yZShuZXcgbW9tZW50KCkpKSB7CiAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcignSW52YWxpZCBvciBpbmNvbXBsZXRlIGlucHV0cycpLmdvQXdheSgxNTAwKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBhdmFpbGFibGUgPSBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5yb29tcyk7CgogICAgICB0aGlzLmJvb2tpbmdzLmZvckVhY2goZnVuY3Rpb24gKGIpIHsKICAgICAgICB2YXIgc3RhcnQgPSBtb21lbnQoYi5zdGFydF9kYXRlKS5zdWJ0cmFjdCgxLCAnbWludXRlcycpOwogICAgICAgIHZhciBlbmQgPSBtb21lbnQoYi5lbmRfZGF0ZSkuYWRkKDEsICdtaW51dGVzJyk7CgogICAgICAgIGlmIChzdGFydF92YWx1ZS5pc0JldHdlZW4oc3RhcnQsIGVuZCkgfHwgZW5kX3ZhbHVlLmlzQmV0d2VlbihzdGFydCwgZW5kKSkgewogICAgICAgICAgdmFyIGkgPSBfdGhpcy5maW5kQnlOYW1lKGF2YWlsYWJsZSwgYi5yb29tX25hbWUpOwoKICAgICAgICAgIGF2YWlsYWJsZS5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5hdmFpbGFibGVfcm9vbXMgPSBhdmFpbGFibGU7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["SearchBox.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"date_search\">\n    <h3 class=\"text-center m-4\">Search by date and time</h3>\n    <div class=\"row mt-4 justify-content-center\">\n      <label class=\"col-3\">When: </label>\n      <input type=\"date\" id=\"date\" class=\"col-4\" v-model=\"date\">\n      <vue-timepicker :minute-interval=\"10\" v-model=\"time\" class=\"tp\"></vue-timepicker>\n    </div>\n    <div class=\"row mt-4 justify-content-center\">\n      <label class=\"col-3\">Duration: </label>\n      <vue-timepicker\n        :hour-range=\"[0, 1, 2, 3, 4, 5]\"\n        :minute-interval=\"30\"\n        v-model=\"duration\"\n        class=\"tp\">    \n      </vue-timepicker>\n      <button @click=\"date_search\" class=\"btn-secondary col-2 offset-md-2\">Search</button>\n    </div>\n  </div>\n</template>\n\n<script>\n  import moment from 'moment';\n  import VueTimepicker from 'vue2-timepicker';\n\n  export default {\n    name: 'SearchBox',\n    props: [\n      'start_date',\n      'end_date',\n      'rooms',\n      'bookings',\n      'available_rooms'\n    ],\n    components: {\n      VueTimepicker,\n    },\n    data() {\n      return {\n        date: \"\",\n        time: \"\",\n        duration: \"\",\n      }\n    },\n    methods: {\n      getStartDate() {\n        let time = this.time.split(':');\n        if (this.date.length > 0 && time.length > 1)\n          this.start_date = new moment(this.date).hours(time[0]).minutes(time[1]);\n        return this.start_date;\n      },\n      getEndDate() {\n        let duration = this.duration.split(':');\n        this.end_date = null;\n        if (this.start_date != null && duration.length > 1) {\n          this.end_date = this.start_date.clone();\n          this.end_date.add(parseInt(duration[0], 10), 'hours');\n          this.end_date.add(parseInt(duration[1], 10), 'minutes');\n        }\n        return this.end_value;\n      },\n      findByName(arr, name) {\n        for (let i = 0; i < arr.length; i++) {\n          if (arr[i].name === name)\n            return i;\n        }\n        return -1;\n      },\n      date_search() {\n        let start_value = this.getStartDate();\n        let end_value = this.getEndDate();\n        if (start_value === null || end_value === null || start_value.isBefore(new moment())) {\n          this.$toasted.error('Invalid or incomplete inputs').goAway(1500);\n          return ;\n        }\n        let available = [...this.rooms];\n        this.bookings.forEach((b) => {\n          let start = moment(b.start_date).subtract(1, 'minutes');\n          let end = moment(b.end_date).add(1, 'minutes');\n          if (start_value.isBetween(start, end) || end_value.isBetween(start, end))\n          {\n            let i = this.findByName(available, b.room_name);\n            available.splice(i, 1);\n          }\n        })\n        this.available_rooms = available; \n      }\n    }\n  }\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\n  .tp {\n    flex: 0 0 25%;\n    max-width: 100%;\n  }\n</style>\n"],"sourceRoot":"src/components"}]}