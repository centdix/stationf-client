{"remainingRequest":"/Users/farhad/Desktop/stationf/client/node_modules/thread-loader/dist/cjs.js!/Users/farhad/Desktop/stationf/client/node_modules/babel-loader/lib/index.js!/Users/farhad/Desktop/stationf/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/farhad/Desktop/stationf/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/farhad/Desktop/stationf/client/src/components/RoomsList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/farhad/Desktop/stationf/client/src/components/RoomsList.vue","mtime":1611239173635},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9Vc2Vycy9mYXJoYWQvRGVza3RvcC9zdGF0aW9uZi9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2ZhcmhhZC9EZXNrdG9wL3N0YXRpb25mL2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUm9vbXNMaXN0JywKICBwcm9wczogWydzdGFydF9kYXRlJywgJ2VuZF9kYXRlJywgJ2F2YWlsYWJsZV9yb29tcyddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtaW5fY2FwOiAwLAogICAgICB0dl9zZWxlY3RlZDogZmFsc2UsCiAgICAgIHJldHJvX3NlbGVjdGVkOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGJvb2s6IGZ1bmN0aW9uIGJvb2socm9vbSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgYm9va2luZywgdXJsLCByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgYm9va2luZyA9IHsKICAgICAgICAgICAgICAgICAgcm9vbV9uYW1lOiByb29tLm5hbWUsCiAgICAgICAgICAgICAgICAgIHN0YXJ0X2RhdGU6IF90aGlzLnN0YXJ0X2RhdGUsCiAgICAgICAgICAgICAgICAgIGVuZF9kYXRlOiBfdGhpcy5lbmRfZGF0ZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHVybCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKHVybCArICdib29rJywgewogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9va2luZykKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIF90aGlzLiRlbWl0KCdib29rJyk7CgogICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgX3RoaXMuJHRvYXN0ZWQuc3VjY2VzcygnUm9vbSBib29rZWQgIScpLmdvQXdheSgxNTAwKTtlbHNlIF90aGlzLiR0b2FzdGVkLmVycm9yKCdTb21ldGhpbmcgd2VudCB3cm9uZy4uLicpLmdvQXdheSgxNTAwKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZpbHRlcmVkUm9vbXM6IGZ1bmN0aW9uIGZpbHRlcmVkUm9vbXMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHJlc3VsdHMgPSBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5hdmFpbGFibGVfcm9vbXMpOwoKICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgaWYgKHIuY2FwYWNpdHkgPCBfdGhpczIubWluX2NhcCkgcmV0dXJuIGZhbHNlOwogICAgICAgIHZhciBoYXNfdHYgPSBmYWxzZTsKICAgICAgICB2YXIgaGFzX3JldHJvID0gZmFsc2U7CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgci5lcXVpcGVtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKHIuZXF1aXBlbWVudHNbaV0ubmFtZSA9PT0gIlRWIikgaGFzX3R2ID0gdHJ1ZTsKICAgICAgICAgIGlmIChyLmVxdWlwZW1lbnRzW2ldLm5hbWUgPT09ICJSZXRybyBQcm9qZWN0ZXVyIikgaGFzX3JldHJvID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmIChfdGhpczIudHZfc2VsZWN0ZWQgJiYgIWhhc190diB8fCBfdGhpczIucmV0cm9fc2VsZWN0ZWQgJiYgIWhhc19yZXRybykgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9KTsKICAgICAgcmV0dXJuIHJlc3VsdHM7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["RoomsList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,KAAA,EAAA,CACA,YADA,EAEA,UAFA,EAGA,iBAHA,CAFA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,CADA;AAEA,MAAA,WAAA,EAAA,KAFA;AAGA,MAAA,cAAA,EAAA;AAHA,KAAA;AAKA,GAbA;AAcA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,gBACA,IADA,EACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,OADA,GACA;AACA,kBAAA,SAAA,EAAA,IAAA,CAAA,IADA;AAEA,kBAAA,UAAA,EAAA,KAAA,CAAA,UAFA;AAGA,kBAAA,QAAA,EAAA,KAAA,CAAA;AAHA,iBADA;AAMA,gBAAA,GANA,GAMA,OAAA,CAAA,GAAA,CAAA,eANA;AAAA;AAAA,uBAOA,KAAA,CAAA,GAAA,GAAA,MAAA,EAAA;AACA,kBAAA,OAAA,EAAA;AACA,oCAAA;AADA,mBADA;AAIA,kBAAA,MAAA,EAAA,MAJA;AAKA,kBAAA,IAAA,EAAA,IAAA,CAAA,SAAA,CAAA,OAAA;AALA,iBAAA,CAPA;;AAAA;AAOA,gBAAA,GAPA;;AAcA,gBAAA,KAAA,CAAA,KAAA,CAAA,MAAA;;AACA,oBAAA,GAAA,CAAA,MAAA,KAAA,GAAA,EACA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,eAAA,EAAA,MAAA,CAAA,IAAA,EADA,KAGA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,yBAAA,EAAA,MAAA,CAAA,IAAA;;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA;AApBA,GAdA;AAoCA,EAAA,QAAA,EAAA;AACA,IAAA,aADA,2BACA;AAAA;;AACA,UAAA,OAAA,sBAAA,KAAA,eAAA,CAAA;;AACA,MAAA,OAAA,GAAA,OAAA,CAAA,MAAA,CAAA,UAAA,CAAA,EAAA;AACA,YAAA,CAAA,CAAA,QAAA,GAAA,MAAA,CAAA,OAAA,EACA,OAAA,KAAA;AACA,YAAA,MAAA,GAAA,KAAA;AACA,YAAA,SAAA,GAAA,KAAA;;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,CAAA,CAAA,WAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,cAAA,CAAA,CAAA,WAAA,CAAA,CAAA,EAAA,IAAA,KAAA,IAAA,EACA,MAAA,GAAA,IAAA;AACA,cAAA,CAAA,CAAA,WAAA,CAAA,CAAA,EAAA,IAAA,KAAA,kBAAA,EACA,SAAA,GAAA,IAAA;AACA;;AACA,YAAA,MAAA,CAAA,WAAA,IAAA,CAAA,MAAA,IAAA,MAAA,CAAA,cAAA,IAAA,CAAA,SAAA,EACA,OAAA,KAAA;AACA,eAAA,IAAA;AACA,OAdA,CAAA;AAeA,aAAA,OAAA;AACA;AAnBA;AApCA,CAAA","sourcesContent":["<template>\n  <div id=\"results\" class=\"mt-4\" v-if=\"available_rooms.length > 0\">\n    <hr>\n    <div class=\"row ml-1\">\n      <h5>Rooms available from {{ start_date | moment(\"L, HH:mm\") }} to {{ end_date | moment(\"L, HH:mm\") }} :</h5>\n    </div>\n    <div class=\"row mt-3\">\n      <div class=\"col-6\">\n        <span>Minimum capacity: {{ min_cap }}</span>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-4\">\n        <input type=\"range\" class=\"form-control-range\" id=\"formControlRange\" min=\"0\" max=\"50\" v-model=\"min_cap\">\n      </div>\n      <div class=\"col-3 offset-md-2\">\n        <input class=\"form-check-input\" type=\"checkbox\" v-model=\"tv_selected\" id=\"flexCheckChecked\">\n        <label class=\"form-check-label\" for=\"flexCheckChecked\">TV</label>\n      </div>\n      <div class=\"col-3\">\n        <input class=\"form-check-input\" type=\"checkbox\" v-model=\"retro_selected\" id=\"flexCheckChecked\">\n        <label class=\"form-check-label\" for=\"flexCheckChecked\">Retro Projecteur</label>\n      </div>  \n    </div>\n    <div class=\"card mt-1\" v-for=\"room in filteredRooms\" :key=\"room.id\">\n      <h5 class=\"card-header text-center\">\n        {{ room.name }}\n      </h5>\n      <div class=\"card-body\">\n        <div class=\"row m-2 justify-content-center\">\n          <div class=\"col-4\">\n            Capacity: {{ room.capacity }}\n          </div>\n          <div class=\"col-4\">\n            <span v-if=\"room.equipements.length > 0\">Equipments: </span>\n            <span v-else>No equipments</span>\n            <br>\n            <span v-for=\"e in room.equipements\" :key=\"e.id\" class=\"ml-3\">\n              {{ e.name }}\n            </span>\n          </div>\n        </div>\n        <div class=\"row justify-content-end m-3\">\n          <button class=\"btn btn-primary col-3\" @click=\"book(room)\">Book</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'RoomsList',\n    props: [\n      'start_date',\n      'end_date',\n      'available_rooms'\n    ],\n    data() {\n      return {\n        min_cap: 0,\n        tv_selected: false,\n        retro_selected: false,\n      }\n    },\n    methods: {\n      async book(room) {\n        let booking = {\n          room_name: room.name,\n          start_date: this.start_date,\n          end_date: this.end_date,\n        };\n        let url = process.env.VUE_APP_API_URL\n        let res = await fetch(url + 'book', {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          method: 'POST',\n          body: JSON.stringify(booking),\n        });\n        this.$emit('book');\n        if (res.status === 200)\n          this.$toasted.success('Room booked !').goAway(1500);\n        else\n          this.$toasted.error('Something went wrong...').goAway(1500);\n      },\n    },\n    computed: {\n      filteredRooms() {\n        let results = [...this.available_rooms];\n        results = results.filter((r) => {\n          if (r.capacity < this.min_cap)\n            return false;\n          let has_tv = false;\n          let has_retro = false;\n          for (let i = 0; i < r.equipements.length; i++) {\n            if (r.equipements[i].name === \"TV\")\n              has_tv = true;\n            if (r.equipements[i].name === \"Retro Projecteur\")\n              has_retro = true;\n          }\n          if ((this.tv_selected && !has_tv) || this.retro_selected && !has_retro)\n            return false;\n          return true;\n        })\n        return results;\n      }\n    }\n  }\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\n\n</style>\n"],"sourceRoot":"src/components"}]}