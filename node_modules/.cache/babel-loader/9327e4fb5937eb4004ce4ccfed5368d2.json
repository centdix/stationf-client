{"remainingRequest":"/Users/farhad/Desktop/stationf/client/node_modules/babel-loader/lib/index.js!/Users/farhad/Desktop/stationf/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/farhad/Desktop/stationf/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/farhad/Desktop/stationf/client/src/components/RoomsList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/farhad/Desktop/stationf/client/src/components/RoomsList.vue","mtime":1611169708898},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/farhad/Desktop/stationf/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9Vc2Vycy9mYXJoYWQvRGVza3RvcC9zdGF0aW9uZi9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2ZhcmhhZC9EZXNrdG9wL3N0YXRpb25mL2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUm9vbXNMaXN0JywKICBwcm9wczogWydzdGFydF9kYXRlJywgJ2VuZF9kYXRlJywgJ2F2YWlsYWJsZV9yb29tcyddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtaW5fY2FwOiAwLAogICAgICB0dl9zZWxlY3RlZDogZmFsc2UsCiAgICAgIHJldHJvX3NlbGVjdGVkOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGJvb2s6IGZ1bmN0aW9uIGJvb2socm9vbSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgYm9va2luZywgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGJvb2tpbmcgPSB7CiAgICAgICAgICAgICAgICAgIHJvb21fbmFtZTogcm9vbS5uYW1lLAogICAgICAgICAgICAgICAgICBzdGFydF9kYXRlOiBfdGhpcy5zdGFydF9kYXRlLAogICAgICAgICAgICAgICAgICBlbmRfZGF0ZTogX3RoaXMuZW5kX2RhdGUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo4MDAwL2Jvb2snLCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib29raW5nKQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoJ2Jvb2snKTsKCiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSBfdGhpcy4kdG9hc3RlZC5zdWNjZXNzKCdSb29tIGJvb2tlZCAhJykuZ29Bd2F5KDE1MDApO2Vsc2UgX3RoaXMuJHRvYXN0ZWQuZXJyb3IoJ1NvbWV0aGluZyB3ZW50IHdyb25nLi4uJykuZ29Bd2F5KDE1MDApOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgZmlsdGVyZWRSb29tczogZnVuY3Rpb24gZmlsdGVyZWRSb29tcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgcmVzdWx0cyA9IF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmF2YWlsYWJsZV9yb29tcyk7CgogICAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIoZnVuY3Rpb24gKHIpIHsKICAgICAgICBpZiAoci5jYXBhY2l0eSA8IF90aGlzMi5taW5fY2FwKSByZXR1cm4gZmFsc2U7CiAgICAgICAgdmFyIGhhc190diA9IGZhbHNlOwogICAgICAgIHZhciBoYXNfcmV0cm8gPSBmYWxzZTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByLmVxdWlwZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoci5lcXVpcGVtZW50c1tpXS5uYW1lID09PSAiVFYiKSBoYXNfdHYgPSB0cnVlOwogICAgICAgICAgaWYgKHIuZXF1aXBlbWVudHNbaV0ubmFtZSA9PT0gIlJldHJvIFByb2plY3RldXIiKSBoYXNfcmV0cm8gPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKF90aGlzMi50dl9zZWxlY3RlZCAmJiAhaGFzX3R2IHx8IF90aGlzMi5yZXRyb19zZWxlY3RlZCAmJiAhaGFzX3JldHJvKSByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVzdWx0czsKICAgIH0KICB9Cn07"},{"version":3,"sources":["RoomsList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,KAAA,EAAA,CACA,YADA,EAEA,UAFA,EAGA,iBAHA,CAFA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,CADA;AAEA,MAAA,WAAA,EAAA,KAFA;AAGA,MAAA,cAAA,EAAA;AAHA,KAAA;AAKA,GAbA;AAcA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,gBACA,IADA,EACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,OADA,GACA;AACA,kBAAA,SAAA,EAAA,IAAA,CAAA,IADA;AAEA,kBAAA,UAAA,EAAA,KAAA,CAAA,UAFA;AAGA,kBAAA,QAAA,EAAA,KAAA,CAAA;AAHA,iBADA;AAAA;AAAA,uBAMA,KAAA,CAAA,4BAAA,EAAA;AACA,kBAAA,OAAA,EAAA;AACA,oCAAA;AADA,mBADA;AAIA,kBAAA,MAAA,EAAA,MAJA;AAKA,kBAAA,IAAA,EAAA,IAAA,CAAA,SAAA,CAAA,OAAA;AALA,iBAAA,CANA;;AAAA;AAMA,gBAAA,GANA;;AAaA,gBAAA,KAAA,CAAA,KAAA,CAAA,MAAA;;AACA,oBAAA,GAAA,CAAA,MAAA,KAAA,GAAA,EACA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,eAAA,EAAA,MAAA,CAAA,IAAA,EADA,KAGA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,yBAAA,EAAA,MAAA,CAAA,IAAA;;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA;AAnBA,GAdA;AAmCA,EAAA,QAAA,EAAA;AACA,IAAA,aADA,2BACA;AAAA;;AACA,UAAA,OAAA,sBAAA,KAAA,eAAA,CAAA;;AACA,MAAA,OAAA,GAAA,OAAA,CAAA,MAAA,CAAA,UAAA,CAAA,EAAA;AACA,YAAA,CAAA,CAAA,QAAA,GAAA,MAAA,CAAA,OAAA,EACA,OAAA,KAAA;AACA,YAAA,MAAA,GAAA,KAAA;AACA,YAAA,SAAA,GAAA,KAAA;;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,CAAA,CAAA,WAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,cAAA,CAAA,CAAA,WAAA,CAAA,CAAA,EAAA,IAAA,KAAA,IAAA,EACA,MAAA,GAAA,IAAA;AACA,cAAA,CAAA,CAAA,WAAA,CAAA,CAAA,EAAA,IAAA,KAAA,kBAAA,EACA,SAAA,GAAA,IAAA;AACA;;AACA,YAAA,MAAA,CAAA,WAAA,IAAA,CAAA,MAAA,IAAA,MAAA,CAAA,cAAA,IAAA,CAAA,SAAA,EACA,OAAA,KAAA;AACA,eAAA,IAAA;AACA,OAdA,CAAA;AAeA,aAAA,OAAA;AACA;AAnBA;AAnCA,CAAA","sourcesContent":["<template>\n  <div id=\"results\" class=\"mt-4\" v-if=\"available_rooms.length > 0\">\n    <div class=\"row ml-1\">\n      <h5>Rooms available from {{ start_date | moment(\"L, HH:mm\") }} to {{ end_date | moment(\"L, HH:mm\") }} :</h5>\n    </div>\n    <div class=\"row mt-3\">\n      <div class=\"col-6\">\n        <span>Minimum capacity: {{ min_cap }}</span>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-4\">\n        <input type=\"range\" class=\"form-control-range\" id=\"formControlRange\" min=\"0\" max=\"50\" v-model=\"min_cap\">\n      </div>\n      <div class=\"col-3 offset-md-2\">\n        <input class=\"form-check-input\" type=\"checkbox\" v-model=\"tv_selected\" id=\"flexCheckChecked\">\n        <label class=\"form-check-label\" for=\"flexCheckChecked\">TV</label>\n      </div>\n      <div class=\"col-3\">\n        <input class=\"form-check-input\" type=\"checkbox\" v-model=\"retro_selected\" id=\"flexCheckChecked\">\n        <label class=\"form-check-label\" for=\"flexCheckChecked\">Retro Projecteur</label>\n      </div>  \n    </div>\n    <div class=\"card mt-1\" v-for=\"room in filteredRooms\" :key=\"room.id\">\n      <h5 class=\"card-header text-center\">\n        {{ room.name }}\n      </h5>\n      <div class=\"card-body\">\n        <div class=\"row m-2 justify-content-center\">\n          <div class=\"col-4\">\n            Capacity: {{ room.capacity }}\n          </div>\n          <div class=\"col-4\">\n            <span v-if=\"room.equipements.length > 0\">Equipments: </span>\n            <span v-else>No equipments</span>\n            <br>\n            <span v-for=\"e in room.equipements\" :key=\"e.id\" class=\"ml-3\">\n              {{ e.name }}\n            </span>\n          </div>\n        </div>\n        <div class=\"row justify-content-end m-3\">\n          <button class=\"btn btn-primary col-3\" @click=\"book(room)\">Book</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'RoomsList',\n    props: [\n      'start_date',\n      'end_date',\n      'available_rooms'\n    ],\n    data() {\n      return {\n        min_cap: 0,\n        tv_selected: false,\n        retro_selected: false,\n      }\n    },\n    methods: {\n      async book(room) {\n        let booking = {\n          room_name: room.name,\n          start_date: this.start_date,\n          end_date: this.end_date,\n        };\n        let res = await fetch('http://localhost:8000/book', {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          method: 'POST',\n          body: JSON.stringify(booking),\n        });\n        this.$emit('book');\n        if (res.status === 200)\n          this.$toasted.success('Room booked !').goAway(1500);\n        else\n          this.$toasted.error('Something went wrong...').goAway(1500);\n      },\n    },\n    computed: {\n      filteredRooms() {\n        let results = [...this.available_rooms];\n        results = results.filter((r) => {\n          if (r.capacity < this.min_cap)\n            return false;\n          let has_tv = false;\n          let has_retro = false;\n          for (let i = 0; i < r.equipements.length; i++) {\n            if (r.equipements[i].name === \"TV\")\n              has_tv = true;\n            if (r.equipements[i].name === \"Retro Projecteur\")\n              has_retro = true;\n          }\n          if ((this.tv_selected && !has_tv) || this.retro_selected && !has_retro)\n            return false;\n          return true;\n        })\n        return results;\n      }\n    }\n  }\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\n\n</style>\n"],"sourceRoot":"src/components"}]}